-- Seed de modulos habilitados por proveedor
SET search_path TO proveedores, public;

WITH module_ids AS (
    SELECT code, id FROM proveedores.modules
)
INSERT INTO proveedores.provider_modules (provider_id, module_id, is_enabled, enabled_at)
SELECT DISTINCT
    data.provider_id,
    module_ids.id,
    TRUE,
    NOW()
FROM (
    VALUES
        (25, 'orders'),
        (25, 'orders_backorders'),
        (25, 'orders_entries'),
        (25, 'orders_new'),
        (27, 'inventory'),
        (27, 'orders'),
        (27, 'orders_backorders'),
        (27, 'orders_entries'),
        (27, 'orders_new'),
        (27, 'others'),
        (27, 'returns'),
        (27, 'sales'),
        (27, 'sellinout'),
        (28, 'inventory'),
        (28, 'orders'),
        (28, 'orders_backorders'),
        (28, 'orders_entries'),
        (28, 'orders_new'),
        (28, 'others'),
        (28, 'returns'),
        (28, 'sales'),
        (28, 'sellinout'),
        (30, 'inventory'),
        (30, 'orders'),
        (30, 'orders_backorders'),
        (30, 'orders_entries'),
        (30, 'orders_new'),
        (30, 'others'),
        (30, 'purchases'),
        (30, 'purchases_periods'),
        (30, 'purchases_sellin'),
        (30, 'returns'),
        (30, 'sales'),
        (30, 'sales_periods'),
        (30, 'sales_sellout'),
        (32, 'orders'),
        (32, 'orders_backorders'),
        (32, 'orders_entries'),
        (32, 'orders_new'),
        (32, 'others'),
        (32, 'returns'),
        (33, 'inventory'),
        (33, 'others'),
        (33, 'returns'),
        (33, 'sales'),
        (33, 'sales_periods'),
        (33, 'sales_sellout'),
        (48, 'inventory'),
        (48, 'orders'),
        (48, 'orders_backorders'),
        (48, 'orders_entries'),
        (48, 'orders_new'),
        (48, 'others'),
        (48, 'returns'),
        (48, 'sales'),
        (48, 'sales_periods'),
        (48, 'sellinout'),
        (49, 'inventory'),
        (49, 'orders'),
        (49, 'orders_backorders'),
        (49, 'orders_entries'),
        (49, 'orders_new'),
        (49, 'others'),
        (49, 'returns'),
        (49, 'sales'),
        (49, 'sales_periods'),
        (49, 'sellinout'),
        (51, 'inventory'),
        (51, 'orders'),
        (51, 'orders_backorders'),
        (51, 'others'),
        (51, 'sales'),
        (51, 'sales_periods'),
        (51, 'sellinout'),
        (52, 'inventory'),
        (52, 'orders'),
        (52, 'orders_backorders'),
        (52, 'orders_entries'),
        (52, 'orders_new'),
        (52, 'others'),
        (52, 'returns'),
        (52, 'sales'),
        (52, 'sales_periods'),
        (52, 'sellinout'),
        (54, 'orders'),
        (54, 'orders_backorders'),
        (54, 'orders_entries'),
        (54, 'orders_new'),
        (60, 'inventory'),
        (60, 'orders'),
        (60, 'orders_backorders'),
        (60, 'orders_entries'),
        (60, 'orders_new'),
        (60, 'others'),
        (60, 'returns'),
        (65, 'inventory'),
        (65, 'orders'),
        (65, 'orders_backorders'),
        (65, 'orders_new'),
        (65, 'others'),
        (65, 'sales'),
        (65, 'sales_periods'),
        (65, 'sales_sellout'),
        (67, 'sales'),
        (67, 'sales_periods'),
        (67, 'sales_sellout'),
        (68, 'inventory'),
        (68, 'orders'),
        (68, 'orders_backorders'),
        (68, 'orders_entries'),
        (68, 'orders_new'),
        (68, 'others'),
        (68, 'purchases'),
        (68, 'purchases_periods'),
        (68, 'purchases_sellin'),
        (68, 'returns'),
        (68, 'sales'),
        (68, 'sales_periods'),
        (68, 'sales_sellout'),
        (70, 'inventory'),
        (70, 'others'),
        (70, 'sales'),
        (70, 'sales_periods'),
        (70, 'sales_sellout'),
        (77, 'inventory'),
        (77, 'orders'),
        (77, 'orders_backorders'),
        (77, 'orders_entries'),
        (77, 'orders_new'),
        (77, 'others'),
        (77, 'purchases'),
        (77, 'purchases_periods'),
        (77, 'purchases_sellin'),
        (77, 'returns'),
        (77, 'sales'),
        (77, 'sales_periods'),
        (77, 'sales_sellout'),
        (79, 'inventory'),
        (79, 'orders'),
        (79, 'orders_backorders'),
        (79, 'orders_entries'),
        (79, 'orders_new'),
        (79, 'others'),
        (79, 'purchases'),
        (79, 'purchases_periods'),
        (79, 'purchases_sellin'),
        (79, 'returns'),
        (79, 'sales'),
        (79, 'sales_periods'),
        (79, 'sales_sellout'),
        (82, 'sales'),
        (82, 'sales_periods'),
        (82, 'sales_sellout'),
        (85, 'orders'),
        (85, 'orders_backorders'),
        (85, 'orders_entries'),
        (85, 'orders_new'),
        (85, 'sales'),
        (85, 'sales_periods'),
        (85, 'sales_sellout'),
        (86, 'inventory'),
        (86, 'orders'),
        (86, 'orders_backorders'),
        (86, 'orders_entries'),
        (86, 'orders_new'),
        (86, 'others'),
        (86, 'purchases'),
        (86, 'purchases_periods'),
        (86, 'purchases_sellin'),
        (86, 'returns'),
        (86, 'sales'),
        (86, 'sales_periods'),
        (86, 'sales_sellout'),
        (87, 'sales'),
        (87, 'sales_periods'),
        (87, 'sales_sellout')
) AS data(provider_id, module_code)
JOIN module_ids ON module_ids.code = data.module_code
ON CONFLICT (provider_id, module_id) DO UPDATE
SET is_enabled = TRUE, enabled_at = NOW();
